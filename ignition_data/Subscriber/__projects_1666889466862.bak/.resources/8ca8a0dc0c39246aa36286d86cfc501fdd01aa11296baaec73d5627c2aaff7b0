{
  "custom": {
    "timeSelection": 28800
  },
  "params": {
    "area": "Area 3",
    "isDept": false,
    "isMobile": false,
    "vav": "[default]BMS/90BR/VAV/VAV 1-23 CO2"
  },
  "propConfig": {
    "custom.timeSelection": {
      "binding": {
        "config": {
          "struct": {
            "time": "{/root/Data/Hist Data Cont/Time Range/Time.props.value}",
            "units": "{/root/Data/Hist Data Cont/Time Range/Units.props.value}"
          },
          "waitOnAll": true
        },
        "transforms": [
          {
            "code": "\t# Get amount of seconds for the tag history chart.\n\t\n\tunits \u003d value[\u0027units\u0027]\n\ttime \u003d value[\u0027time\u0027]\n\t\n\tif units \u003d\u003d 0:\n\t\tif time \u003e 1209600:\n\t\t\ttime \u003d 1209600\n\t\treturn time\n\telif units \u003d\u003d 1:\n\t\tif time \u003e 20160:\n\t\t\ttime \u003d 20160\n\t\treturn time * 60\n\telif units \u003d\u003d 2:\n\t\tif time \u003e 336:\n\t\t\ttime \u003d 336\n\t\treturn time * 3600\n\telse:\n\t\tif time \u003e 14:\n\t\t\ttime \u003d 14\n\t\treturn time * 86400",
            "type": "script"
          }
        ],
        "type": "expr-struct"
      },
      "persistent": true
    },
    "params.area": {
      "paramDirection": "input",
      "persistent": true
    },
    "params.isDept": {
      "paramDirection": "input",
      "persistent": true
    },
    "params.isMobile": {
      "paramDirection": "input",
      "persistent": true
    },
    "params.vav": {
      "paramDirection": "input",
      "persistent": true
    }
  },
  "props": {
    "defaultSize": {
      "height": 876,
      "width": 503
    }
  },
  "root": {
    "children": [
      {
        "children": [
          {
            "events": {
              "dom": {
                "onClick": {
                  "config": {
                    "script": "\t# In large version, close this side panel.\n\t\n\tsystem.perspective.closeDock(\u0027vavDetailsCO2\u0027)"
                  },
                  "scope": "G",
                  "type": "script"
                }
              }
            },
            "meta": {
              "name": "Close"
            },
            "position": {
              "basis": "28px",
              "shrink": 0
            },
            "propConfig": {
              "position.display": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,false,true)"
                  },
                  "type": "expr"
                }
              }
            },
            "props": {
              "elements": [
                {
                  "d": "M0 0h24v24H0V0z",
                  "fill": {
                    "paint": "none"
                  },
                  "name": "path",
                  "type": "path"
                },
                {
                  "d": "M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z",
                  "name": "path",
                  "type": "path"
                }
              ],
              "fill": "var(--neutral-100)",
              "style": {
                "cursor": "pointer",
                "marginLeft": "5px"
              },
              "viewBox": "0 0 24 24"
            },
            "type": "ia.shapes.svg"
          },
          {
            "events": {
              "dom": {
                "onClick": {
                  "config": {
                    "script": "\t# On mobile, close this side panel.\n\t\n\tsystem.perspective.closeDock(\u0027vavDetailsCO2\u0027)"
                  },
                  "scope": "G",
                  "type": "script"
                }
              }
            },
            "meta": {
              "name": "Go Back"
            },
            "position": {
              "basis": "30px"
            },
            "propConfig": {
              "position.display": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,true,false)"
                  },
                  "type": "expr"
                }
              }
            },
            "props": {
              "elements": [
                {
                  "d": "M0 0h24v24H0z",
                  "fill": {
                    "paint": "none"
                  },
                  "name": "path",
                  "type": "path"
                },
                {
                  "d": "M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",
                  "name": "path",
                  "type": "path"
                }
              ],
              "fill": "var(--neutral-80)",
              "style": {
                "cursor": "pointer",
                "marginLeft": "5px"
              },
              "viewBox": "0 0 24 24"
            },
            "type": "ia.shapes.svg"
          },
          {
            "meta": {
              "name": "VAV Name"
            },
            "position": {
              "grow": 1
            },
            "propConfig": {
              "props.style.fontSize": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,\u002716px\u0027,\u002725px\u0027)"
                  },
                  "type": "expr"
                }
              },
              "props.text": {
                "binding": {
                  "config": {
                    "path": "view.params.vav"
                  },
                  "transforms": [
                    {
                      "code": "\t# Return the name of the VAV from the path.\n\t\n\tparts \u003d value.split(\u0027/\u0027)\n\treturn parts[len(parts)-1]",
                      "type": "script"
                    }
                  ],
                  "type": "property"
                }
              }
            },
            "props": {
              "style": {
                "color": "--neutral-100",
                "paddingRight": "35px",
                "textAlign": "center"
              }
            },
            "type": "ia.display.label"
          }
        ],
        "meta": {
          "name": "Header Cont"
        },
        "propConfig": {
          "position.basis": {
            "binding": {
              "config": {
                "expression": "if({view.params.isMobile}\u003dtrue,\u002745px\u0027,\u002765px\u0027)"
              },
              "type": "expr"
            }
          }
        },
        "type": "ia.container.flex"
      },
      {
        "children": [
          {
            "meta": {
              "name": "VAV"
            },
            "position": {
              "basis": "175px",
              "shrink": 0
            },
            "propConfig": {
              "props.params.vav": {
                "binding": {
                  "config": {
                    "path": "view.params.vav"
                  },
                  "type": "property"
                }
              }
            },
            "props": {
              "path": "Building Automation Demo/Page/Floor Plans/Framework/VAV Details Comps/VAV"
            },
            "type": "ia.display.view"
          },
          {
            "children": [
              {
                "children": [
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Zone Temp Lbl"
                        },
                        "position": {
                          "basis": "100px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "Zone"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "meta": {
                          "name": "Zone Temp"
                        },
                        "position": {
                          "grow": 1
                        },
                        "propConfig": {
                          "props.text": {
                            "binding": {
                              "config": {
                                "expression": "numberFormat(tag({view.params.vav} + \u0027/Temp_Zone\u0027), tag({view.params.vav} + \u0027/Temp_Zone.FormatString\u0027)) + \u0027Â°F\u0027"
                              },
                              "type": "expr"
                            }
                          }
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value"
                          }
                        },
                        "type": "ia.display.label"
                      }
                    ],
                    "meta": {
                      "name": "Zone Temp"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "props": {
                      "style": {
                        "overflow": "hidden"
                      }
                    },
                    "type": "ia.container.flex"
                  },
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Lbl"
                        },
                        "position": {
                          "basis": "100px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "Carbon Dioxide"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "meta": {
                          "name": "Value"
                        },
                        "position": {
                          "grow": 1
                        },
                        "propConfig": {
                          "position.basis": {
                            "binding": {
                              "config": {
                                "path": "view.params.area"
                              },
                              "transforms": [
                                {
                                  "code": "\tif len(value) \u003c 17:\n\t\treturn \u0027auto\u0027\n\telse:\n\t\treturn \u002780px\u0027",
                                  "type": "script"
                                }
                              ],
                              "type": "property"
                            }
                          },
                          "props.text": {
                            "binding": {
                              "config": {
                                "fallbackDelay": 2.5,
                                "mode": "indirect",
                                "references": {
                                  "vav": "{view.params.vav}"
                                },
                                "tagPath": "{vav}/CO2_Zone"
                              },
                              "transforms": [
                                {
                                  "code": "\treturn str(value) + \u0027ppm\u0027",
                                  "type": "script"
                                }
                              ],
                              "type": "tag"
                            }
                          }
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value"
                          }
                        },
                        "type": "ia.display.label"
                      }
                    ],
                    "meta": {
                      "name": "Carbon Dioxide"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "props": {
                      "style": {
                        "overflow": "visible"
                      }
                    },
                    "type": "ia.container.flex"
                  },
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Lbl"
                        },
                        "position": {
                          "basis": "100px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "Requesting"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "children": [
                          {
                            "meta": {
                              "name": "Value"
                            },
                            "position": {
                              "basis": "50px"
                            },
                            "propConfig": {
                              "props.style.backgroundColor": {
                                "binding": {
                                  "config": {
                                    "path": "this.props.text"
                                  },
                                  "transforms": [
                                    {
                                      "code": "\tif \u0027NONE\u0027 in value:\n\t\treturn \u0027--success\u0027\n\telif \u0027HEAT\u0027 in value:\n\t\treturn \u0027--error\u0027\n\telif \u0027COOL\u0027 in value:\n\t\treturn \u0027--qual-2\u0027",
                                      "type": "script"
                                    }
                                  ],
                                  "type": "property"
                                }
                              },
                              "props.style.color": {
                                "binding": {
                                  "config": {
                                    "expression": "if({session.props.theme} \u003d \u0027hvac-dark\u0027 || {session.props.theme} \u003d \u0027hvac-dark-warm\u0027,\u0027--neutral-100\u0027,\u0027--neutral-10\u0027)"
                                  },
                                  "type": "expr"
                                }
                              },
                              "props.text": {
                                "binding": {
                                  "config": {
                                    "expression": "if(tag({view.params.vav}+\"/Request_Cool\")\u003d1,\r\n\"COOL\",\r\n\"NONE\"\r\n)"
                                  },
                                  "type": "expr"
                                }
                              }
                            },
                            "props": {
                              "style": {
                                "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value",
                                "fontWeight": "bold",
                                "marginBottom": "2px",
                                "marginTop": "2px",
                                "paddingLeft": "5px",
                                "paddingRight": "5px"
                              }
                            },
                            "type": "ia.display.label"
                          }
                        ],
                        "meta": {
                          "name": "Val"
                        },
                        "position": {
                          "grow": 1
                        },
                        "props": {
                          "alignItems": "center",
                          "justify": "center"
                        },
                        "type": "ia.container.flex"
                      }
                    ],
                    "meta": {
                      "name": "VAV Requesting"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "props": {
                      "style": {
                        "overflow": "hidden"
                      }
                    },
                    "type": "ia.container.flex"
                  },
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Lbl"
                        },
                        "position": {
                          "basis": "100px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "System Occupied"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "meta": {
                          "name": "Value"
                        },
                        "position": {
                          "grow": 1
                        },
                        "propConfig": {
                          "props.text": {
                            "binding": {
                              "config": {
                                "expression": "if({[default]BMS/90BR/_Schedule/System - Occupied}\u003d1,\r\n\"Yes\",\r\nif(tag({view.params.vav}+\"/Mode_Override_On\")\u003d1,\r\n\"Yes\",\r\n\"No\"\r\n))"
                              },
                              "type": "expr"
                            }
                          }
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value",
                            "fontWeight": "bold"
                          }
                        },
                        "type": "ia.display.label"
                      }
                    ],
                    "meta": {
                      "name": "Occupied"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "type": "ia.container.flex"
                  }
                ],
                "meta": {
                  "name": "Temp Req Occ"
                },
                "position": {
                  "basis": "35%",
                  "grow": 1
                },
                "props": {
                  "direction": "column",
                  "style": {
                    "marginRight": "7%"
                  }
                },
                "type": "ia.container.flex"
              },
              {
                "children": [
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Lbl"
                        },
                        "position": {
                          "basis": "110px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "Desired SP"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "meta": {
                          "name": "Numeric Entry Field"
                        },
                        "position": {
                          "basis": "0px",
                          "grow": 1
                        },
                        "propConfig": {
                          "props.value": {
                            "binding": {
                              "config": {
                                "bidirectional": true,
                                "fallbackDelay": 2.5,
                                "mode": "indirect",
                                "references": {
                                  "vav": "{view.params.vav}"
                                },
                                "tagPath": "{vav}/Temp_SP_Desired"
                              },
                              "type": "tag"
                            }
                          }
                        },
                        "props": {
                          "align": "center",
                          "spinner": {
                            "enabled": false
                          },
                          "style": {
                            "backgroundColor": "--neutral-10",
                            "borderStyle": "none",
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value",
                            "outlineStyle": "none"
                          }
                        },
                        "type": "ia.input.numeric-entry-field"
                      }
                    ],
                    "meta": {
                      "name": "Desired SP"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "props": {
                      "style": {
                        "overflow": "hidden"
                      }
                    },
                    "type": "ia.container.flex"
                  },
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Lbl"
                        },
                        "position": {
                          "basis": "110px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "Environment Adjust"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "meta": {
                          "name": "Val"
                        },
                        "position": {
                          "grow": 1
                        },
                        "propConfig": {
                          "props.text": {
                            "binding": {
                              "config": {
                                "fallbackDelay": 2.5,
                                "mode": "direct",
                                "tagPath": "[default]BMS/90BR/VAV/_Global/Temp_SP_OSA_Shift"
                              },
                              "transforms": [
                                {
                                  "code": "\treturn \"{:.1f}\".format(value)",
                                  "type": "script"
                                }
                              ],
                              "type": "tag"
                            }
                          }
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value"
                          }
                        },
                        "type": "ia.display.label"
                      }
                    ],
                    "meta": {
                      "name": "Environ Adjust"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "props": {
                      "style": {
                        "overflow": "hidden"
                      }
                    },
                    "type": "ia.container.flex"
                  },
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Lbl"
                        },
                        "position": {
                          "basis": "110px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "Thermostat Adjust"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "meta": {
                          "name": "Val"
                        },
                        "position": {
                          "grow": 1
                        },
                        "propConfig": {
                          "props.text": {
                            "binding": {
                              "config": {
                                "fallbackDelay": 2.5,
                                "mode": "indirect",
                                "references": {
                                  "vav": "{view.params.vav}"
                                },
                                "tagPath": "{vav}/Temp_SP_Adjust"
                              },
                              "transforms": [
                                {
                                  "code": "\treturn \"{:.1f}\".format(value)",
                                  "type": "script"
                                }
                              ],
                              "type": "tag"
                            }
                          }
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value"
                          }
                        },
                        "type": "ia.display.label"
                      }
                    ],
                    "meta": {
                      "name": "Thermostat Adjust"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "props": {
                      "style": {
                        "overflow": "hidden"
                      }
                    },
                    "type": "ia.container.flex"
                  },
                  {
                    "children": [
                      {
                        "meta": {
                          "name": "Lbl"
                        },
                        "position": {
                          "basis": "110px"
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                          },
                          "text": "Effective SP"
                        },
                        "type": "ia.display.label"
                      },
                      {
                        "meta": {
                          "name": "Value"
                        },
                        "position": {
                          "grow": 1
                        },
                        "propConfig": {
                          "props.text": {
                            "binding": {
                              "config": {
                                "expression": "numberFormat(tag({view.params.vav} + \u0027/Temp_SP_Effective\u0027), tag({view.params.vav} + \u0027/Temp_SP_Effective.FormatString\u0027)) + \u0027Â°F\u0027"
                              },
                              "type": "expr"
                            }
                          }
                        },
                        "props": {
                          "style": {
                            "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value"
                          }
                        },
                        "type": "ia.display.label"
                      }
                    ],
                    "meta": {
                      "name": "Effective SP"
                    },
                    "position": {
                      "basis": "90px",
                      "grow": 1
                    },
                    "props": {
                      "style": {
                        "overflow": "hidden"
                      }
                    },
                    "type": "ia.container.flex"
                  }
                ],
                "meta": {
                  "name": "Setpoint Info"
                },
                "position": {
                  "basis": "35%",
                  "grow": 1
                },
                "props": {
                  "direction": "column"
                },
                "type": "ia.container.flex"
              }
            ],
            "meta": {
              "name": "Current Values"
            },
            "position": {
              "basis": "112px",
              "shrink": 0
            },
            "propConfig": {
              "props.style.marginLeft": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,\u002713px\u0027,\u002740px\u0027)"
                  },
                  "type": "expr"
                }
              },
              "props.style.marginRight": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,\u00276px\u0027,\u002718px\u0027)"
                  },
                  "type": "expr"
                }
              }
            },
            "props": {
              "alignContent": "flex-end",
              "justify": "flex-end",
              "style": {
                "marginTop": "30px"
              }
            },
            "type": "ia.container.flex"
          },
          {
            "children": [
              {
                "children": [
                  {
                    "meta": {
                      "name": "Dept Lbl"
                    },
                    "position": {
                      "basis": "100px",
                      "shrink": 0
                    },
                    "propConfig": {
                      "props.text": {
                        "binding": {
                          "config": {
                            "path": "view.params.isDept"
                          },
                          "transforms": [
                            {
                              "code": "\tif value:\n\t\tif \u0027\u0026\u0027 in self.view.params.area:\n\t\t\treturn \u0027Departments\u0027\n\t\telse:\n\t\t\treturn \u0027Department\u0027\n\telse:\n\t\treturn \u0027Area\u0027",
                              "type": "script"
                            }
                          ],
                          "type": "property"
                        }
                      }
                    },
                    "props": {
                      "style": {
                        "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-name"
                      }
                    },
                    "type": "ia.display.label"
                  },
                  {
                    "meta": {
                      "name": "Dept"
                    },
                    "position": {
                      "grow": 1
                    },
                    "propConfig": {
                      "props.text": {
                        "binding": {
                          "config": {
                            "path": "view.params.area"
                          },
                          "type": "property"
                        }
                      }
                    },
                    "props": {
                      "style": {
                        "classes": "building-automation-demo/page/floor-plans/framework/vav-details-label-value"
                      }
                    },
                    "type": "ia.display.label"
                  }
                ],
                "meta": {
                  "name": "Dept"
                },
                "position": {
                  "basis": "46.5%",
                  "shrink": 0
                },
                "props": {
                  "style": {
                    "overflow": "hidden"
                  }
                },
                "type": "ia.container.flex"
              }
            ],
            "meta": {
              "name": "Dept Cont"
            },
            "position": {
              "shrink": 0
            },
            "propConfig": {
              "props.style.marginLeft": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,\u002713px\u0027,\u002740px\u0027)"
                  },
                  "type": "expr"
                }
              },
              "props.style.marginRight": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,\u00276px\u0027,\u002718px\u0027)"
                  },
                  "type": "expr"
                }
              },
              "props.style.marginTop": {
                "binding": {
                  "config": {
                    "expression": "if({view.params.isMobile}\u003dtrue,\u00274px\u0027,\u00278px\u0027)"
                  },
                  "type": "expr"
                }
              }
            },
            "props": {
              "alignContent": "flex-end"
            },
            "type": "ia.container.flex"
          },
          {
            "children": [
              {
                "meta": {
                  "name": "CO2 PPM Data"
                },
                "position": {
                  "basis": "200px",
                  "grow": 1
                },
                "propConfig": {
                  "props.series[0].data": {
                    "binding": {
                      "config": {
                        "struct": {
                          "timeSelection": "{view.custom.timeSelection}",
                          "vav": "{view.params.vav}"
                        },
                        "waitOnAll": true
                      },
                      "transforms": [
                        {
                          "code": "\t# Query data for this zone\u0027s CO2 amount using the \u0027Last Time\u0027 settings\n\t# configured by the user. Then, put the data in a format that the chart\n\t# expects (based on the chart configuration set on this view).\n\t\n\tseconds \u003d value[\u0027timeSelection\u0027]\n\tvav \u003d value[\u0027vav\u0027]\n\t\n\tpath\u003d \u0027[default]\u0027 + vav + \u0027/CO2_Zone\u0027\n\tendTime \u003d system.date.now()\n\tstartTime \u003d system.date.addSeconds(endTime,(0-seconds))\n\thistory \u003d system.tag.queryTagHistory(paths\u003d[path],startDate\u003dstartTime,endDate\u003dendTime,aggregationMode\u003d\u0027LastValue\u0027,returnSize\u003d300,noInterpolation\u003d0)\n\t\n\tdata \u003d []\n\tfor x in range(0,history.getRowCount()):\n\t\tdata.append({\u0027time\u0027:system.date.toMillis(history.getValueAt(x,0)),\u0027co2\u0027:history.getValueAt(x,1)})\n\t\n\treturn data",
                          "type": "script"
                        }
                      ],
                      "type": "expr-struct"
                    }
                  }
                },
                "props": {
                  "plots": [
                    {
                      "axes": [
                        {
                          "alignment": "left",
                          "label": {
                            "font": {
                              "color": "#00D415",
                              "size": 13
                            },
                            "offset": 0,
                            "style": {
                              "classes": ""
                            },
                            "text": "CO2 PPM",
                            "visible": true
                          },
                          "max": "",
                          "min": "",
                          "name": "co2PPM",
                          "style": {
                            "classes": ""
                          },
                          "tick": {
                            "color": "",
                            "label": {
                              "font": {
                                "color": "",
                                "size": 10
                              },
                              "style": {
                                "classes": ""
                              }
                            },
                            "style": {
                              "classes": ""
                            }
                          },
                          "width": 60
                        }
                      ],
                      "markers": [],
                      "trends": [
                        {
                          "axis": "co2PPM",
                          "baselines": [],
                          "breakLine": true,
                          "columns": [
                            {
                              "color": "#00D415",
                              "key": "co2",
                              "styles": {
                                "highlighted": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "muted": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "normal": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "selected": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                }
                              }
                            }
                          ],
                          "interpolation": "curveLinear",
                          "radius": 2,
                          "series": "co2",
                          "stack": true,
                          "type": "line",
                          "visible": true
                        }
                      ]
                    }
                  ],
                  "series": [
                    {
                      "name": "co2"
                    }
                  ],
                  "style": {
                    "marginBottom": "-10px",
                    "paddingRight": "20px"
                  },
                  "timeAxis": {
                    "height": 0,
                    "tick": {
                      "color": "var(--neutral-30)"
                    },
                    "tickCount": 1,
                    "visible": false
                  },
                  "timeRange": {
                    "visible": false
                  }
                },
                "type": "ia.chart.timeseries"
              },
              {
                "meta": {
                  "name": "Historical Data"
                },
                "position": {
                  "basis": "260px",
                  "grow": 1
                },
                "propConfig": {
                  "props.series[0].data": {
                    "binding": {
                      "config": {
                        "struct": {
                          "timeSelection": "{view.custom.timeSelection}",
                          "vav": "{view.params.vav}"
                        },
                        "waitOnAll": true
                      },
                      "transforms": [
                        {
                          "code": "\t# Query data for Temp Zone and Flow Discharge using the \u0027Last Time\u0027 settings\n\t# configured by the user. Then, put the data in a format that the chart\n\t# expects (based on the chart configuration set on this view).\n\t\n\tseconds \u003d value[\u0027timeSelection\u0027]\n\tvav \u003d value[\u0027vav\u0027]\n\t\n\tpathTempZone \u003d \u0027[default]\u0027 + vav + \u0027/Temp_Zone\u0027\n\tpathFlowDischarge \u003d \u0027[default]\u0027 + vav + \u0027/Flow_Duct1\u0027\n\tendTime \u003d system.date.now()\n\tstartTime \u003d system.date.addSeconds(endTime,(0-seconds))\n\thistory \u003d system.tag.queryTagHistory(paths\u003d[pathTempZone,pathFlowDischarge],startDate\u003dstartTime,endDate\u003dendTime,aggregationMode\u003d\u0027LastValue\u0027,returnSize\u003d300,noInterpolation\u003d0)\n\t\n\tdata \u003d []\n\tfor x in range(0,history.getRowCount()):\n\t\tdata.append({\u0027time\u0027:system.date.toMillis(history.getValueAt(x,0)),\u0027zoneTemp\u0027:history.getValueAt(x,1),\u0027flowDischarge\u0027:history.getValueAt(x,2)})\n\t\n\treturn data",
                          "type": "script"
                        }
                      ],
                      "type": "expr-struct"
                    }
                  }
                },
                "props": {
                  "plots": [
                    {
                      "axes": [
                        {
                          "alignment": "left",
                          "label": {
                            "font": {
                              "color": "rgb(203,147,6)",
                              "size": 13
                            },
                            "offset": 0,
                            "style": {
                              "classes": ""
                            },
                            "text": "CFM",
                            "visible": true
                          },
                          "max": "",
                          "min": "",
                          "name": "cfmTotal",
                          "style": {
                            "classes": ""
                          },
                          "tick": {
                            "color": "",
                            "label": {
                              "font": {
                                "color": "",
                                "size": 10
                              },
                              "style": {
                                "classes": ""
                              }
                            },
                            "style": {
                              "classes": ""
                            }
                          },
                          "width": 60
                        },
                        {
                          "alignment": "right",
                          "label": {
                            "font": {
                              "color": "#1A8CF2",
                              "size": 13
                            },
                            "offset": 0,
                            "style": {
                              "classes": ""
                            },
                            "text": "Zone Temp",
                            "visible": true
                          },
                          "max": 85,
                          "min": 65,
                          "name": "zoneTemp",
                          "style": {
                            "classes": ""
                          },
                          "tick": {
                            "color": "",
                            "label": {
                              "font": {
                                "color": "",
                                "size": 10
                              },
                              "style": {
                                "classes": ""
                              }
                            },
                            "style": {
                              "classes": ""
                            }
                          },
                          "width": 60
                        }
                      ],
                      "markers": [],
                      "trends": [
                        {
                          "axis": "cfmTotal",
                          "baselines": [],
                          "breakLine": true,
                          "columns": [
                            {
                              "color": "rgb(203,147,6)",
                              "key": "flowDischarge",
                              "styles": {
                                "highlighted": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "muted": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "normal": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "selected": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                }
                              }
                            }
                          ],
                          "interpolation": "curveLinear",
                          "radius": 2,
                          "series": "zoneTempCFMTotal",
                          "stack": true,
                          "type": "line",
                          "visible": true
                        },
                        {
                          "axis": "zoneTemp",
                          "baselines": [],
                          "breakLine": true,
                          "columns": [
                            {
                              "color": "#1A8CF2",
                              "key": "zoneTemp",
                              "styles": {
                                "highlighted": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "muted": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "normal": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                },
                                "selected": {
                                  "fill": {
                                    "color": "",
                                    "opacity": null
                                  },
                                  "stroke": {
                                    "color": "",
                                    "dashArray": null,
                                    "opacity": null,
                                    "width": null
                                  }
                                }
                              }
                            }
                          ],
                          "interpolation": "curveLinear",
                          "radius": 2,
                          "series": "zoneTempCFMTotal",
                          "stack": true,
                          "type": "line",
                          "visible": true
                        }
                      ]
                    }
                  ],
                  "series": [
                    {
                      "name": "zoneTempCFMTotal"
                    }
                  ],
                  "style": {
                    "marginBottom": "15px"
                  }
                },
                "type": "ia.chart.timeseries"
              },
              {
                "children": [
                  {
                    "meta": {
                      "name": "Last Lbl"
                    },
                    "position": {
                      "basis": "50px"
                    },
                    "props": {
                      "text": "Last:"
                    },
                    "type": "ia.display.label"
                  },
                  {
                    "meta": {
                      "name": "Time"
                    },
                    "position": {
                      "basis": "50px"
                    },
                    "propConfig": {
                      "props.inputBounds.maximum": {
                        "binding": {
                          "config": {
                            "path": "../Units.props.value"
                          },
                          "transforms": [
                            {
                              "code": "\tif value \u003d\u003d 0:\n\t\treturn 1209600\n\telif value \u003d\u003d 1:\n\t\treturn 20160\n\telif value \u003d\u003d 2:\n\t\treturn 336\n\telse:\n\t\treturn 14",
                              "type": "script"
                            }
                          ],
                          "type": "property"
                        }
                      }
                    },
                    "props": {
                      "inputBounds": {
                        "minimum": 1
                      },
                      "style": {
                        "maxHeight": "25px"
                      },
                      "value": 8
                    },
                    "type": "ia.input.numeric-entry-field"
                  },
                  {
                    "meta": {
                      "name": "Units"
                    },
                    "position": {
                      "basis": "100px"
                    },
                    "propConfig": {
                      "props.value": {
                        "onChange": {
                          "enabled": null,
                          "script": "\ttime \u003d self.getSibling(\"Time\").props.value\n\tunits \u003d currentValue.value\n\t\n\tif units \u003d\u003d 0:\n\t\tif time \u003e 1209600:\n\t\t\tself.getSibling(\"Time\").props.value \u003d 1209600\n\telif units \u003d\u003d 1:\n\t\tif time \u003e 20160:\n\t\t\tself.getSibling(\"Time\").props.value \u003d 20160\n\telif units \u003d\u003d 2:\n\t\tif time \u003e 336:\n\t\t\tself.getSibling(\"Time\").props.value \u003d 336\n\telse:\n\t\tif time \u003e 14:\n\t\t\tself.getSibling(\"Time\").props.value \u003d 14"
                        }
                      }
                    },
                    "props": {
                      "options": [
                        {
                          "label": "Seconds",
                          "value": 0
                        },
                        {
                          "label": "Minutes",
                          "value": 1
                        },
                        {
                          "label": "Hours",
                          "value": 2
                        },
                        {
                          "label": "Days",
                          "value": 3
                        }
                      ],
                      "style": {
                        "marginLeft": "10px",
                        "marginRight": "10px",
                        "maxHeight": "22px"
                      },
                      "value": 2
                    },
                    "type": "ia.input.dropdown"
                  }
                ],
                "meta": {
                  "name": "Time Range"
                },
                "position": {
                  "basis": "30px",
                  "shrink": 0
                },
                "props": {
                  "alignItems": "center",
                  "justify": "center",
                  "style": {
                    "overflow": "hidden"
                  }
                },
                "type": "ia.container.flex"
              }
            ],
            "meta": {
              "name": "Hist Data Cont"
            },
            "position": {
              "basis": "380px",
              "grow": 1,
              "shrink": 0
            },
            "props": {
              "direction": "column",
              "style": {
                "marginTop": "30px"
              }
            },
            "type": "ia.container.flex"
          },
          {
            "meta": {
              "name": "Two Weeks Label"
            },
            "position": {
              "basis": "25px",
              "shrink": 0
            },
            "props": {
              "style": {
                "color": "--neutral-60",
                "fontSize": "11px",
                "textAlign": "center"
              },
              "text": "Max query range for demo: 2 weeks"
            },
            "type": "ia.display.label"
          }
        ],
        "meta": {
          "name": "Data"
        },
        "position": {
          "basis": "200px",
          "grow": 1
        },
        "props": {
          "direction": "column"
        },
        "type": "ia.container.flex"
      },
      {
        "children": [
          {
            "custom": {
              "toolTipShown": false
            },
            "events": {
              "dom": {
                "onTouchEnd": {
                  "config": {
                    "script": "\tif self.custom.toolTipShown \u003d\u003d False:\n\t\tself.requestTooltip()\n\t\tself.custom.toolTipShown \u003d True\n\telse:\n\t\tself.removeTooltip()\n\t\tself.custom.toolTipShown \u003d False"
                  },
                  "scope": "G",
                  "type": "script"
                }
              }
            },
            "meta": {
              "name": "CO2 Desc",
              "tooltip": {
                "delay": 200,
                "enabled": true,
                "location": "top-left",
                "style": {
                  "backgroundColor": "var(--neutral-30)",
                  "color": "var(--neutral-90)",
                  "fontSize": "13px",
                  "fontWeight": "bold",
                  "textAlign": "left",
                  "white-space": "pre"
                },
                "sustain": 60000,
                "text": "CO2:\n   PPM \u003c 1,000: Normal\n   PPM \u003e 10,000: Breathing Issues\n   PPM \u003e 50,000: Dangerous\n\nAverage Person\u0027s Exhale: 40,000 PPM"
              }
            },
            "position": {
              "basis": "25px",
              "shrink": 0
            },
            "props": {
              "elements": [
                {
                  "d": "M0 0h24v24H0z",
                  "fill": {
                    "paint": "none"
                  },
                  "name": "path",
                  "type": "path"
                },
                {
                  "d": "M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z",
                  "name": "path",
                  "type": "path"
                }
              ],
              "fill": "var(--neutral-70)",
              "style": {
                "marginTop": "-45px",
                "zIndex": 1
              },
              "viewBox": "0 0 24 24"
            },
            "type": "ia.shapes.svg"
          }
        ],
        "meta": {
          "name": "CO2 Desc Cont"
        },
        "position": {
          "basis": "0px"
        },
        "props": {
          "style": {
            "marginLeft": "10px",
            "overflow": "visible"
          }
        },
        "type": "ia.container.flex"
      }
    ],
    "meta": {
      "name": "root"
    },
    "props": {
      "direction": "column",
      "style": {
        "backgroundColor": "--neutral-10"
      }
    },
    "type": "ia.container.flex"
  }
}